<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Generador de Imágenes y Videos</title>
</head>
<body>
    <h2>Arrastra y suelta tu imagen aquí:</h2>
    <div>
        <label for="widthInput">Ancho:</label>
        <input type="number" id="widthInput" value="512">
        <label for="heightInput">Alto:</label>
        <input type="number" id="heightInput" value="512">
    </div>
    <div id="drop_zone" style="width: 400px; height: 200px; border: 2px dashed #ccc; text-align: center; line-height: 200px; font-size: 16px;">Suelta la imagen aquí</div>

    <!-- Botón para descargar todas las imágenes -->
    <button id="downloadButton">Descargar todas las imágenes</button>

    <!-- Script para procesar la imagen -->
    <script>
        var filesData = [];

        function handleFileDrop(e) {
            e.preventDefault();
            var files = e.dataTransfer.files;
            for (var i = 0; i < files.length; i++) {
                var file = files[i];
                var reader = new FileReader();
                reader.onload = function(e) {
                    var img = new Image();
                    img.src = e.target.result;
                    img.onload = function() {
                        var width = parseInt(document.getElementById('widthInput').value);
                        var height = parseInt(document.getElementById('heightInput').value);
                        generateIcons(img);
                        generateScreenshots(img);
                        generatePromotionalImage(img);
                        // También puedes agregar la lógica para manejar videos y FireTV assets aquí
                    };
                };
                reader.readAsDataURL(file);
            }
        }

        function generateIcons(sourceImg) {
            createImage(sourceImg, 512, 512, "tablet_large_icon");
            createImage(sourceImg, 114, 114, "tablet_small_icon");
        }

        function generateScreenshots(sourceImg) {
            var resolutions = [
                { width: 800, height: 480 },
                { width: 1024, height: 600 },
                { width: 1280, height: 720 },
                { width: 1280, height: 800 },
                { width: 1920, height: 1080 },
                { width: 1920, height: 1200 },
                { width: 2560, height: 1600 }
            ];
            resolutions.forEach(function(resolution) {
                createImage(sourceImg, resolution.width, resolution.height, "screenshot_" + resolution.width + "x" + resolution.height);
            });
        }

        function generatePromotionalImage(sourceImg) {
            createImage(sourceImg, 1024, 500, "tablet_promotional_image");
        }

        function createImage(sourceImg, width, height, fileName) {
            var canvas = document.createElement('canvas');
            var ctx = canvas.getContext('2d');
            canvas.width = width;
            canvas.height = height;
            ctx.drawImage(sourceImg, 0, 0, width, height);
            var imageData = canvas.toDataURL('image/png');
            filesData.push({ name: fileName, data: imageData });
        }

        function handleDragOver(e) {
            e.preventDefault();
        }

        function downloadAllFiles() {
            var zip = new JSZip();
            filesData.forEach(function(file) {
                zip.file(file.name + ".png", file.data.split(",")[1], { base64: true });
            });
            zip.generateAsync({ type: "blob" }).then(function(content) {
                saveAs(content, "images_and_assets.zip");
            });
        }

        var dropZone = document.getElementById('drop_zone');
        dropZone.addEventListener('dragover', handleDragOver, false);
        dropZone.addEventListener('drop', handleFileDrop, false);

        var downloadButton = document.getElementById('downloadButton');
        downloadButton.addEventListener('click', downloadAllFiles);
    </script>
    
    <!-- Bibliotecas JSZip y FileSaver.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.7.1/jszip.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.5/FileSaver.min.js"></script>
</body>
</html>
